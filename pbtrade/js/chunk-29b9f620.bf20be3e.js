(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29b9f620"],{"1d93":function(e,t,a){},"817b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("topNav",{attrs:{navList:e.navList,current:e.current},on:{change:e.changeNav}}),a("div",{staticClass:"bgfff pd30 mb20"},[a("div",{staticClass:"tabBtnNav"},e._l(e.checkedList,(function(t,s){return a("span",{key:s,class:{current:s==e.checkType},on:{click:function(t){return e.changeCheck(s)}}},[e._v(e._s(t))])})),0),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"form",attrs:{size:"small",model:e.form,rules:e.rules,"label-width":"150px"}},[a("div",{staticClass:"bgfff pd30",staticStyle:{"padding-bottom":"1px"}},[e.isBasket?e._e():a("el-form-item",{key:"StockCode1",attrs:{label:"证券代码",prop:"StockCode"}},[a("div",{staticClass:"zqBox"},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入证券代码",onkeyup:"value=value.replace(/[^\\w\\.\\/]/ig,'')"},on:{change:e.getName},model:{value:e.form.StockCode,callback:function(t){e.$set(e.form,"StockCode",t)},expression:"form.StockCode"}},[a("template",{slot:"suffix"},[e._v(e._s(e.form.StockName))])],2)],1)]),e.isBasket?a("el-form-item",{key:"BasketNo",attrs:{label:"篮子编号",prop:"BasketNo"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入篮子编号",onkeyup:"value=value.replace(/[^\\w\\.\\/]/ig,'')"},on:{change:e.getBokName},model:{value:e.form.BasketNo,callback:function(t){e.$set(e.form,"BasketNo",t)},expression:"form.BasketNo"}})],1):e._e(),e.isBasket?a("el-form-item",{key:"StockCode2",attrs:{label:"证券代码",prop:"StockCode"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入证券代码",disabled:e.isdisable,onkeyup:"value=value.replace(/[^\\w\\.\\/]/ig,'')"},model:{value:e.form.StockCode,callback:function(t){e.$set(e.form,"StockCode",t)},expression:"form.StockCode"}},[a("template",{slot:"suffix"},[e._v(e._s(e.form.StockName))])],2)],1):e._e(),e.isBasket?e._e():a("el-form-item",{key:"ExchangeType",attrs:{label:"交易市场",prop:"ExchangeType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择交易市场",size:"small"},on:{blur:e.getRate},model:{value:e.form.ExchangeType,callback:function(t){e.$set(e.form,"ExchangeType",t)},expression:"form.ExchangeType"}},e._l(e.shichang,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.type}})})),1)],1),a("el-form-item",{key:"dateString",attrs:{label:"约定日期",prop:"dateString"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyyMMdd",type:"date",placeholder:"选择约定日期",format:"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.form.dateString,callback:function(t){e.$set(e.form,"dateString",t)},expression:"form.dateString"}})],1),a("el-form-item",{key:"AppDateType",attrs:{label:"日期类型",prop:"AppDateType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择日期类型",size:"small"},model:{value:e.form.AppDateType,callback:function(t){e.$set(e.form,"AppDateType",t)},expression:"form.AppDateType"}},e._l(e.riqileixing,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.type}})})),1)],1),a("el-form-item",{key:"BusiCode",attrs:{label:"约定模式",prop:"BusiCode"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择约定模式",size:"small"},on:{change:e.getRate},model:{value:e.form.BusiCode,callback:function(t){e.$set(e.form,"BusiCode",t)},expression:"form.BusiCode"}},e._l(e.yuedingCode,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.type}})})),1)],1),a("el-form-item",{key:"Term",attrs:{label:"借入天数",prop:"Term"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入借入天数（天）"},on:{blur:e.getRate},model:{value:e.form.Term,callback:function(t){e.$set(e.form,"Term",t)},expression:"form.Term"}}),a("p",{staticStyle:{color:"rgba(0, 0, 0, 0.45)"}},[e._v("计息基数为起始日收盘价，合约起始日不允许归还 ")])],1),e.isBasket?e._e():a("el-form-item",{key:"Qty1",attrs:{label:"约定数量",prop:"Qty"}},[a("el-input",{attrs:{placeholder:"请输入约定数量（股）",onkeyup:"this.value=this.value.replace(/\\D|^0/g,'')",onafterpaste:"this.value=this.value.replace(/\\D|^0/g,'')"},on:{blur:e.getQty},model:{value:e.form.Qty,callback:function(t){e.$set(e.form,"Qty",t)},expression:"form.Qty"}})],1),e.isBasket?a("el-form-item",{key:"Qty2",attrs:{label:"约定数量",prop:"QTY"}},[a("el-input",{attrs:{placeholder:"请输入约定数量（份）",disabled:""},model:{value:e.QTY,callback:function(t){e.QTY=t},expression:"QTY"}})],1):e._e(),a("el-form-item",{attrs:{label:"约定融券费率报价"}},[a("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.FeeRate,callback:function(t){e.$set(e.form,"FeeRate",t)},expression:"form.FeeRate"}})],1),a("el-form-item",{attrs:{label:"参与竞价"}},[a("el-switch",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1),e.checked?a("el-form-item",{attrs:{label:"约定融券费率竞价"}},[a("div",{staticClass:"rqfl"},[a("div",{staticClass:"rateBox"},[a("div",{staticClass:"min",on:{click:e.min}},[a("i",{staticClass:"el-icon-minus"}),a("span",[e._v("0.5")])]),a("div",{staticClass:"center"},[a("el-input",{staticStyle:{width:"80px"},on:{blur:e.getjingjia,input:function(t){e.form.CustRate=e.formatDecimal(t)}},model:{value:e.form.CustRate,callback:function(t){e.$set(e.form,"CustRate",t)},expression:"form.CustRate"}}),a("span",{staticClass:"rate"},[e._v("%")])],1),a("div",{staticClass:"max",on:{click:e.add}},[a("i",{staticClass:"el-icon-plus"}),a("span",[e._v("0.5")])])]),a("span",[e._v("竞价费率最小为"+e._s(e.form.FeeRate))])])]):e._e(),a("el-form-item",{attrs:{label:"可用保证金"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.balanceAndQuota.enableBailBalance,callback:function(t){e.$set(e.balanceAndQuota,"enableBailBalance",t)},expression:"balanceAndQuota.enableBailBalance"}})],1),a("el-form-item",{attrs:{label:"可用融券额度"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.balanceAndQuota.sloEnableQuota,callback:function(t){e.$set(e.balanceAndQuota,"sloEnableQuota",t)},expression:"balanceAndQuota.sloEnableQuota"}})],1)],1),e.checked?a("div",{staticClass:"message mb20"},[e._v("提示： 违约金率"+e._s(e.form.PostRate)+" 提前归还费率："+e._s(e.form.CustRate+"%")+"/年")]):a("div",{staticClass:"message mb20"},[e._v("违约金率"+e._s(e.form.PostRate)+" 提前归还费率："+e._s(e.form.PreRate)+"/年")])])],1),a("el-col",{attrs:{span:12}},[a("pubNote")],1)],1)],1),a("div",{staticClass:"submitBox"},[a("el-button",{staticClass:"submit_btn",on:{click:function(t){return e.submitForm()}}},[e._v("提交")])],1),a("mingxi",{ref:"confirmModel",attrs:{editData:e.form,loading:e.loading,mingxiSource:"custom"},on:{submit:e.confirmYq}}),a("countdownModel",{ref:"successModel",attrs:{isFail:e.isFail,text:e.successText}})],1)},o=[],i=a("5530"),r=(a("b680"),a("6a6e")),n=a("0680"),c=a("ca00"),l=a("dec5"),u=a("8683"),d=a("8d63"),m=a("1ba4"),f=a("2f62"),p={components:{topNav:r["a"],mingxi:l["a"],countdownModel:u["a"],pubNote:d["a"]},data:function(){return{balanceAndQuota:{},isFail:!1,dictionary:n["a"],navList:["借入委托","委托查询","委托导入","委托定制"],navUrl:["entrustBorrow","entrustQuery","entrustImport","entrustCustom"],current:0,checkedList:["个券","篮子"],checkType:0,yuedingCode:[{type:"110B",text:"T+0"},{type:"111B",text:"T+1"}],riqileixing:[{type:"0",text:"仅当日有效"},{type:"1",text:"该日（含）前有效"}],shichang:[{type:"1",text:"上海"},{type:"2",text:"深圳"}],checked:!1,form:{dateString:c["a"].getNowFormatDate(),AppDateType:"0",ExchangeType:"",StockCode:"",BusiCode:"110B",Term:"",Qty:"",BasketNo:"",FeeRate:"",PostRate:"",PreRate:"",CustRate:0,isBasket:!1},QTY:"1",rules:{dateString:[{required:!0,message:"请选择约定日期",trigger:"change"}],AppDateType:[{required:!0,message:"请选择日期类型",trigger:"change"}],ExchangeType:[{required:!0,message:"请选择交易市场",trigger:"change"}],StockCode:[{required:!0,message:"请输入证券代码",trigger:"change"}],BusiCode:[{required:!0,message:"请选择约定模式",trigger:"change"}],Term:[{required:!0,message:"请输入借入天数（天）",trigger:"change"}],Qty:[{required:!0,message:"请输入约定数量（股）",trigger:"change"}],BasketNo:[{required:!0,message:"请输入篮子编号",trigger:"change"}]},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},loading:!1,isdisable:!1,successText:""}},created:function(){this.getBalanceAndQuota()},mounted:function(){},computed:Object(i["a"])(Object(i["a"])({},Object(f["c"])(["fundAccount"])),{},{isBasket:function(){return 1===this.checkType}}),methods:{formatDecimal:function(e){return c["a"].formatDecimal(e,2)},submitForm:function(){var e=this;this.form.isBasket=this.isBasket,1==this.checkType&&(this.form.Qty=this.QTY),this.form.checked=this.checked,this.$refs.form.validate((function(t){if(!t)return!1;e.form.FeeRate?e.$refs.confirmModel.showModel():e.$message.info("请先查询费率！")}))},confirmYq:function(e){var t=this;this.loading=!0;var a=this.isBasket,s=this.form,o=s.ExchangeType,i=s.BusiCode,r=s.StockCode,n=s.AppDateType,l=s.dateString,u=s.Term,d=s.Qty,f=s.FeeRate,p=s.PreRate,h=s.PostRate,k=s.CustRate,g=s.BasketNo,v={RouteID:"W",OpStation:"127.0.0.1",OperatorID:this.fundAccount,FundAccount:this.fundAccount,StockCode:r,CurrDate:c["a"].getNowFormatDate(),AppDateType:n,AppDate:l,Term:u,Qty:d,AppRate:parseFloat(f),PreRate:parseFloat(p),PostRate:parseFloat(h)};a?(v.BasketProp=1,v.BasketType=0,v.BasketNo=g):(v.BasketProp=0,v.ExchangeType=o,v.BusiCode=i),1==this.checked?(v.BidFlag=1,v.CustRate=k,v.PreRate=k):0==this.checked&&(v.BidFlag=0,v.PreRate=parseFloat(p)),"110B"==this.form.BusiCode?v.TradeType=0:"111B"==this.form.BusiCode&&(v.TradeType=1),Object(m["a"])(v,104).then((function(e){t.loading=!1,t.resetForm(),t.$refs.confirmModel.closeModel(),t.isFail=!1,t.successText="您的委托单已提交成功啦！",t.$refs.successModel.showModel(),t.form.stockName=""})).catch((function(e){t.loading=!1,t.isFail=!0,t.$refs.confirmModel.closeModel(),t.successText="您的委托单提交失败啦！",t.form.stockName="",t.$refs.successModel.showModel()}))},changeNav:function(e){this.$router.push({name:this.navUrl[e]})},changeCheck:function(e){var t=this;this.checkType=e,this.$nextTick((function(){t.resetForm()}))},getQty:function(){this.form.Qty%100===0?console.log(this.form.Qty%100===0):(this.$message("约定数量必须是100的倍数"),this.form.Qty="")},getjingjia:function(){this.form.CustRate<parseFloat(this.form.FeeRate)?(this.$message.info("竞价费率不得小于"+this.form.FeeRate),this.form.CustRate=parseFloat(this.form.FeeRate)):this.form.CustRate>=100&&(this.$message.info("竞价费率不得大于100%！"),this.form.CustRate=100)},add:function(){var e=this.form,t=e.CustRate,a=e.FeeRate;a=a||0,t=t||0,t>=100?this.$message.info("融券费率"+a+"竞价费率"+a+"不得超出100.00%"):this.form.CustRate=c["a"].Add(parseFloat(t),.5)},min:function(){var e=this.form,t=e.CustRate,a=e.FeeRate;a=a||"0",parseFloat(t)<=parseFloat(a)?this.$message.info("融券费率"+a+"竞价费率"+t+"%不得低于"+a):(t=c["a"].Minus(parseFloat(t),.5),parseFloat(t)<=parseFloat(a)&&(t=parseFloat(a)),this.form.CustRate=t)},getRate:function(){var e=this,t=this.form,a=this.isBasket,s=t.Term,o=t.BusiCode,i=t.ExchangeType,r=t.StockCode;if(!s||!o||!i&&!a||!r)return!1;this.form.Term<2?(this.$message.info("借入天数不能小于2天"),this.form.Term=2):this.form.Term>182&&(this.$message.info("借入天数不能大于182天"),this.form.Term=182);var n={BusiCode:o,TermInDays:this.form.Term,StockCode:r,FundAccount:this.fundAccount};this.isBasket?(n.PricingType="Basket",n.ExchangeType="B3"):(n.PricingType="stock",n.ExchangeType=i),Object(m["a"])(n,115).then((function(t){var a=t.data[0];e.form.FeeRate=a.FeeRate.toFixed(2)+"%",e.form.PostRate=a.PostRate.toFixed(2)+"%",e.form.PreRate=a.PreRate.toFixed(2)+"%",e.form.CustRate=a.FeeRate})).catch((function(){e.form.FeeRate="",e.form.PostRate="",e.form.PreRate="",e.form.CustRate=""}))},getName:function(){var e=this;this.form.StockName="";var t=this.form.StockCode;if(t){var a={FundAccount:this.fundAccount,QueryMode:0,StockCode:t};this.getNameRequest(a,101).then((function(t){if(e.form.StockCode=a.StockCode,t.recordNum>0){var s=t.data[0];e.form.StockName=s.StockName,e.form.ExchangeType=s.ExchangeType,e.isdisable=!0}else e.isdisable=!1,e.$message("未查询到该个券信息"),e.form.StockCode=""}))}},getBokName:function(){var e=this,t=this.form.BasketNo;if(!t)return this.isdisable=!1,void(this.form.StockCode="");var a={RouteID:"W",FundAccount:this.fundAccount,OperatorID:this.fundAccount,QueryMode:1,ACTION_IN:0,BasketNo:t};this.getNameRequest(a,113).then((function(t){if(e.form.BasketNo=a.BasketNo,t.recordNum>0){var s=t.data[0];e.form.StockName=s.StockName,e.form.StockCode=s.StockCode,e.isdisable=!0}else e.form.StockName="",e.form.BasketNo="",e.$message("未查询到该篮子信息"),e.isdisable=!1}))},getNameRequest:function(e,t){var a=this;return Object(m["a"])(e,t).then((function(e){if(a.resetForm(),e.recordNum>0){var t=e.data[0];a.form.stockName=t.StockName,a.form.StockCode=t.StockCode}return a.checked=!1,e}))},resetForm:function(){this.$refs.form.resetFields(),this.checked=!1},getBalanceAndQuota:function(){var e=this;Object(m["a"])({FundAccount:this.fundAccount},130).then((function(t){e.balanceAndQuota=t.data}))}}},h=p,k=(a("98df"),a("2877")),g=Object(k["a"])(h,s,o,!1,null,"29b61a6f",null);t["default"]=g.exports},"945c":function(e,t,a){"use strict";a("1d93")},"98df":function(e,t,a){"use strict";a("b9e9")},b9e9:function(e,t,a){},dec5:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("selfModel",{attrs:{visible:e.visible,width:"500",title:"委托明细"},on:{close:e.closeModel}},[a("div",{staticClass:"yuequanModel",attrs:{slot:"modelContent"},slot:"modelContent"},[a("div",{staticClass:"list"},[e.editData.isBasket?a("p",[e._v(" 篮子代码"),a("span",[e._v(e._s(e.editData.BasketNo))])]):e._e(),a("p",[e._v(" 证券代码："),a("span",[e._v(e._s(e.editData.StockName)+"     "+e._s(e.editData.StockCode))])]),e.editData.isBasket?e._e():["list"===e.mingxiSource?a("p",[e._v(" 股东账号："),a("span",[e._v(e._s(e.editData.stockAccount))])]):e._e(),a("p",[e._v(" 交易市场："),a("span",[e._v(e._s(e.shichangc[e.editData.ExchangeType]))])])],a("p",[e._v(" 约定日期："),a("span",[e._v(e._s(e.editData.dateString))])]),a("p",[e._v(" 日期类型："),a("span",[e._v(e._s(e.riqi[e.editData.AppDateType]))])]),a("p",[e._v(" 约定模式："),a("span",[e._v(e._s(e.yueding[e.editData.BusiCode]))])]),a("p",[e._v(" 借入天数："),a("span",[e._v(e._s(e.editData.Term||e.editData.MaxTerm))])]),a("p",[e._v(" 约定数量："),a("span",[e._v(e._s(e.editData.Qty))])]),a("p",[e._v(" 约定融券费率报价："),a("span",[e._v(e._s(e.editData.FeeRate)+"/年")])]),a("p",[e._v(" 参与竞价："),a("span",[e._v(e._s(e.editData.checked?"是":"否"))])]),e.editData.checked?a("p",[e._v(" 约定融券竞价费率："),a("span",[e._v(e._s(e.editData.CustRate+"%")+"/年")])]):e._e(),a("p",[e._v(" 违约金率："),a("span",[e._v(e._s(e.editData.PostRate))])]),a("p",[e._v(" 提前归还费率："),a("span",[e._v(e._s(e.editData.checked?e.editData.CustRate+"%":e.editData.PreRate)+"/年")])])],2),a("div",{staticClass:"submitBox"},[a("el-button",{staticClass:"submit_btn",attrs:{loading:e.loading},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)])])],1)},o=[],i=a("0f9a"),r={1:"上海",2:"深圳"},n={0:"仅当日有效",1:"该日（含）前有效"},c={"110B":"T+0","111B":"T+1"},l={components:{selfModel:i["a"]},props:{loading:{},editData:{type:Object,default:function(){return{}}},mingxiSource:{type:String,default:"list"}},data:function(){return{visible:!1,shichangc:r,riqi:n,yueding:c}},mounted:function(){},methods:{showModel:function(){this.visible=!0},closeModel:function(){this.visible=!1},submit:function(){this.$emit("submit",this.editData)}}},u=l,d=(a("945c"),a("2877")),m=Object(d["a"])(u,s,o,!1,null,"2bca58f4",null);t["a"]=m.exports}}]);